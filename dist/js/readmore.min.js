!function(d){"use strict";var o="readmore",n={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,beforeToggle:function(){},afterToggle:function(){}},r={},s=0;function h(e){var t=e.clone().css({height:"auto",width:e.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(e),a=t.outerHeight(),i=parseInt(t.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),o=e.data("defaultHeight"),t=(t.remove(),e.data("collapsedHeight")||o);i?t<i&&(t=i):t=o,e.data({expandedHeight:a,maxHeight:i,collapsedHeight:t}).css({maxHeight:"none"})}function l(){var e=this,t=arguments,a=g&&!p;clearTimeout(p),p=setTimeout(function(){p=null,g||i.apply(e,t)},c),a&&i.apply(e,t)}var i,c,g,p;i=function(){d("[data-readmore]").each(function(){var e=d(this),t="true"===e.attr("aria-expanded");h(e),e.css({height:e.data(t?"expandedHeight":"collapsedHeight")})})},c=100;function u(e,t){var a,i;this.element=e,this.options=d.extend({},n,t),e=this.options,r[e.selector]||(t=" ",e.embedCSS&&""!==e.blockCSS&&(t+=e.selector+" + [data-readmore-toggle], "+e.selector+"[data-readmore]{"+e.blockCSS+"}"),t+=e.selector+"[data-readmore]{transition: height "+e.speed+"ms;overflow: hidden;}",a=document,t=t,(i=a.createElement("style")).type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(a.createTextNode(t)),a.getElementsByTagName("head")[0].appendChild(i),r[e.selector]=!0),this._defaults=n,this._name=o,this.init(),window.addEventListener("load",l),window.addEventListener("resize",l)}u.prototype={init:function(){var t=this,a=d(this.element),e=(a.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),h(a),a.data("collapsedHeight")),i=a.data("heightMargin");if(a.outerHeight(!0)<=e+i)return!0;var o=a.attr("id")||(i=++s,String(null==o?"rmjs-":o)+i),i=t.options.startOpen?t.options.lessLink:t.options.moreLink;a.attr({"data-readmore":"","aria-expanded":!1,id:o}),a.after(d(i).on("click",function(e){t.toggle(this,a[0],e)}).attr({"data-readmore-toggle":"","aria-controls":o})),t.options.startOpen||a.css({height:e})},toggle:function(e,t,a){a&&a.preventDefault(),e=e||d('[aria-controls="'+this.element.id+'"]')[0],t=t||this.element;var i=this,a=d(t),o="",n="",r=!1,s=a.data("collapsedHeight");a.height()<=s?(o=a.data("expandedHeight")+"px",n="lessLink",r=!0):(o=s,n="moreLink"),i.options.beforeToggle(e,t,!r),a.css({height:o}),a.on("transitionend",function(){i.options.afterToggle(e,t,r),d(this).attr({"aria-expanded":r}).off("transitionend")}),d(e).replaceWith(d(i.options[n]).on("click",function(e){i.toggle(this,t,e)}).attr({"data-readmore-toggle":"","aria-controls":a.attr("id")}))},destroy:function(){d(this.element).each(function(){var e=d(this);e.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),e.removeData()})}},d.fn.readmore=function(t){var a=arguments,i=this.selector;return"object"==typeof(t=t||{})?this.each(function(){var e;d.data(this,"plugin_"+o)&&(e=d.data(this,"plugin_"+o)).destroy.apply(e),t.selector=i,d.data(this,"plugin_"+o,new u(this,t))}):"string"==typeof t&&"_"!==t[0]&&"init"!==t?this.each(function(){var e=d.data(this,"plugin_"+o);e instanceof u&&"function"==typeof e[t]&&e[t].apply(e,Array.prototype.slice.call(a,1))}):void 0}}(jQuery);